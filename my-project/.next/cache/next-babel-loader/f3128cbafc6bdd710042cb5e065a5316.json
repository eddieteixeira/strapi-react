{"ast":null,"code":"var _jsxFileName = \"/home/eddie/Documents/github/strapi-react/my-project/pages/index.js\";\nvar __jsx = React.createElement;\nimport Router from 'next/router';\nimport React, { useEffect, useState, useRef } from 'react';\nconst endpoint = 'http://localhost:1337/todos';\nexport default (() => {\n  const titleRef = useRef();\n  const {\n    0: todos,\n    1: setTodos\n  } = useState([]);\n  const jwtRef = useRef();\n\n  const getTodos = async () => {\n    const res = await fetch(endpoint, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${jwtRef.current}`\n      }\n    }).then(r => r.json());\n    setTodos(res); //console.log(res);\n  };\n\n  useEffect(() => {\n    const jwt = window.sessionStorage.getItem('jwt');\n\n    if (!jwt) {\n      Router.push('/login');\n    }\n\n    jwtRef.current = jwt; //get list of todos\n\n    getTodos();\n  }, []);\n\n  const createToto = async () => {\n    const title = titleRef.current.value;\n    const res = await fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${jwtRef.current}`,\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        title\n      })\n    });\n    console.log(res);\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"200px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Title\",\n    ref: titleRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    onClick: () => create.Todo(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, \"Create Todo\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, \"Todo's List:\"), __jsx(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, JSON.stringify(todos))));\n});","map":{"version":3,"sources":["/home/eddie/Documents/github/strapi-react/my-project/pages/index.js"],"names":["Router","React","useEffect","useState","useRef","endpoint","titleRef","todos","setTodos","jwtRef","getTodos","res","fetch","method","headers","Authorization","current","then","r","json","jwt","window","sessionStorage","getItem","push","createToto","title","value","body","JSON","stringify","console","log","display","flexDirection","width","create","Todo"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;AAEA,MAAMC,QAAQ,GAAG,6BAAjB;AAEA,gBAAe,MAAM;AACnB,QAAMC,QAAQ,GAAGF,MAAM,EAAvB;AACA,QAAM;AAAA,OAACG,KAAD;AAAA,OAAQC;AAAR,MAAoBL,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMM,MAAM,GAAGL,MAAM,EAArB;;AAEA,QAAMM,QAAQ,GAAG,YAAY;AAC3B,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAACP,QAAD,EAAW;AAChCQ,MAAAA,MAAM,EAAE,KADwB;AAEhCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASN,MAAM,CAACO,OAAQ;AADjC;AAFuB,KAAX,CAAL,CAKfC,IALe,CAKVC,CAAC,IAAIA,CAAC,CAACC,IAAF,EALK,CAAlB;AAMAX,IAAAA,QAAQ,CAACG,GAAD,CAAR,CAP2B,CAQ3B;AACD,GATD;;AAWAT,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkB,GAAG,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,KAA9B,CAAZ;;AACA,QAAI,CAACH,GAAL,EAAU;AACRpB,MAAAA,MAAM,CAACwB,IAAP,CAAY,QAAZ;AACD;;AACDf,IAAAA,MAAM,CAACO,OAAP,GAAiBI,GAAjB,CALc,CAOd;;AACAV,IAAAA,QAAQ;AACT,GATQ,EASN,EATM,CAAT;;AAWA,QAAMe,UAAU,GAAG,YAAY;AAC7B,UAAMC,KAAK,GAAGpB,QAAQ,CAACU,OAAT,CAAiBW,KAA/B;AACA,UAAMhB,GAAG,GAAG,MAAMC,KAAK,CAACP,QAAD,EAAY;AACjCQ,MAAAA,MAAM,EAAE,MADyB;AAEjCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASN,MAAM,CAACO,OAAQ,EADjC;AAEP,wBAAgB;AAFT,OAFwB;AAMjCY,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBJ,QAAAA;AADmB,OAAf;AAN2B,KAAZ,CAAvB;AAUDK,IAAAA,OAAO,CAACC,GAAR,CAAYrB,GAAZ;AACA,GAbD;;AAeA,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACN;AAAK,IAAA,KAAK,EAAE;AAAEsB,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,aAAa,EAAE,QAAlC;AAA4CC,MAAAA,KAAK,EAAE;AAAnD,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,WAAW,EAAC,OAA/B;AAAuC,IAAA,GAAG,EAAE7B,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAQ,IAAA,OAAO,EAAG,MAAM8B,MAAM,CAACC,IAAP,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,CADM,EAMN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMR,IAAI,CAACC,SAAL,CAAevB,KAAf,CAAN,CAFJ,CANM,CAAR;AAWD,CArDD","sourcesContent":["import Router from 'next/router';\nimport React, { useEffect, useState, useRef } from 'react';\n\nconst endpoint = 'http://localhost:1337/todos';\n\nexport default () => {\n  const titleRef = useRef();\n  const [todos, setTodos] = useState([]);\n  const jwtRef = useRef();\n\n  const getTodos = async () => {\n    const res = await fetch(endpoint, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${jwtRef.current}`,\n      },\n    }).then(r => r.json());\n    setTodos(res);\n    //console.log(res);\n  };\n\n  useEffect(() => {\n    const jwt = window.sessionStorage.getItem('jwt');\n    if (!jwt) {\n      Router.push('/login');\n    }\n    jwtRef.current = jwt;\n\n    //get list of todos\n    getTodos();\n  }, []);\n\n  const createToto = async () => {\n    const title = titleRef.current.value;\n    const res = await fetch(endpoint,  {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${jwtRef.current}`,\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        title,\n      }),\n   });\n   console.log(res);\n  };\n\n  return  <div>\n    <div style={{ display: \"flex\", flexDirection: \"column\", width: \"200px\" }}>\n      <input type=\"text\" placeholder=\"Title\" ref={titleRef} />\n      <button onClick={ () => create.Todo() }>Create Todo</button>\n    </div>\n\n    <div>\n      <h2>Todo's List:</h2>\n        <pre>{JSON.stringify(todos)}</pre>\n    </div>\n  </div>;\n}"]},"metadata":{},"sourceType":"module"}